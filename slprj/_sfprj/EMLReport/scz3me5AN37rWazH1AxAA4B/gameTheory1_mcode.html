<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">engineTorque</span>,<span class="var type1" id="S3T1U4">motorTorque</span>] = gameTheory(<span class="var type1" id="S4T1U7">requiredTorque</span>, <span class="mxinfo " id="T23:U4"><span class="var type1" id="S5T23U8">FuelConsTable</span></span>, <span class="mxinfo " id="T26:U6"><span class="var type1" id="S6T26U9">GasEmisTable</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line">coder.extrinsic(<span class="string">'genpath'</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line">coder.extrinsic(<span class="string">'addpath'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">coder.extrinsic(<span class="string">'mat2cell'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T1:U8"><span class="var type1" id="S3T1U30">motorTorque</span> = <span class="mxinfo " id="T1:U10">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T1:U11"><span class="var type1" id="S2T1U34">engineTorque</span> = <span class="mxinfo " id="T1:U13">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T56:U14"><span class="extrinsicFcn" id="F270N2:B38">addpath</span>(<span class="mxinfo " id="T56:U15"><span class="extrinsicFcn" id="F269N7:B40">genpath</span>(<span class="mxinfo " id="T57:U16"><span class="string">'C:\Users\Elena\Documents\MATLAB\HEV\src\fuel and emissions'</span></span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%FuelConsTable = fuel;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">%GasEmisTable = exhaustEmis;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="comment">%requiredTorque = 189;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T1:U17"><span class="var type1" id="S10T1U44">engineSpeedRadPerS</span> = <span class="mxinfo " id="T1:U19">500</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T1:U20"><span class="var type1" id="S11T1U48">engineSpeedRadRPM</span> = <span class="mxinfo " id="T1:U22"><span class="var type1" id="S10T1U50">engineSpeedRadPerS</span>*9.5492</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T1:U24"><span class="var type1" id="S12T1U54">SOC_deviation</span> = <span class="mxinfo " id="T1:U26">0.05</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T1:U27"><span class="var type1" id="S13T1U58">maxEngineTorque</span> = <span class="mxinfo " id="T1:U29">136</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T1:U30"><span class="var type1" id="S14T1U62">maxMotorTorque</span> = <span class="mxinfo " id="T1:U32">400</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T1:U33"><span class="var type1" id="S15T1U66">maxRPM</span> = <span class="mxinfo " id="T1:U35">6000</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T1:U36"><span class="var type1" id="S16T1U70">M</span> = <span class="mxinfo " id="T1:U38">60</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T1:U39"><span class="var type1" id="S17T1U74">N</span> = <span class="mxinfo " id="T1:U41">60</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T22:U42"><span class="var type1" id="S18T22U78">payoffMotor</span> = <span class="mxinfo " id="T22:U44">zeros(<span class="mxinfo " id="T1:U45"><span class="var type1" id="S16T1U82">M</span>+1</span>,<span class="mxinfo " id="T1:U47"><span class="var type1" id="S17T1U85">N</span>+1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T22:U49"><span class="var type1" id="S20T22U89">payoffEngine</span> = <span class="mxinfo " id="T22:U51">zeros(<span class="mxinfo " id="T1:U52"><span class="var type1" id="S16T1U93">M</span>+1</span>,<span class="mxinfo " id="T1:U54"><span class="var type1" id="S17T1U96">N</span>+1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T11:U56"><span class="var type1" id="S21T11U100">percentage</span> = <span class="mxinfo " id="T11:U58">0:(1/<span class="var type1" id="S16T1U107">M</span>):1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T1:U60"><span class="var type1" id="S22T1U111">maxMotorTorqueStrategy</span> = <span class="mxinfo " id="T1:U62">min(<span class="mxinfo " id="T14:U63">[<span class="var type1" id="S4T1U116">requiredTorque</span> <span class="mxinfo " id="T1:U65"><span class="var type1" id="S14T1U117">maxMotorTorque</span></span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T1:U67"><span class="var type1" id="S24T1U120">maxEngineTorqueStrategy</span> = <span class="mxinfo " id="T1:U69">min(<span class="mxinfo " id="T14:U70">[<span class="var type1" id="S4T1U125">requiredTorque</span> <span class="mxinfo " id="T1:U72"><span class="var type1" id="S13T1U126">maxEngineTorque</span></span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T11:U74"><span class="var type1" id="S25T11U129">strategyEng</span> = <span class="mxinfo " id="T11:U76"><span class="var type1" id="S21T11U131">percentage</span> .* <span class="var type1" id="S24T1U132">maxEngineTorqueStrategy</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo " id="T11:U79"><span class="var type1" id="S26T11U135">strategyMot</span> = <span class="mxinfo " id="T11:U81"><span class="var type1" id="S21T11U137">percentage</span> .* <span class="var type1" id="S22T1U138">maxMotorTorqueStrategy</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="comment">%strategyMot = fliplr(strategyMot);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T22:U84"><span class="var type1" id="S27T22U141">tmpTorque</span> = <span class="mxinfo " id="T22:U86">repmat(<span class="mxinfo " id="T18:U87"><span class="var type1" id="S25T11U145">strategyEng</span>'</span>,1,<span class="var type1" id="S16T1U148">M</span>+1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T24:U90"><span class="var type1" id="S29T24U152">tmpS</span> = <span class="mxinfo " id="T24:U92">abs(<span class="var type1" id="S5T23U157">FuelConsTable</span>.speed - <span class="var type1" id="S11T1U159">engineSpeedRadRPM</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo " id="T1:U95"><span class="var type1" id="S31T1U162">idxS</span> = <span class="mxinfo " id="T1:U97">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line">[<span class="mxinfo " id="T1:U98"><span class="mxinfo " id="T1:U99">~</span></span>, <span class="var type1" id="S31T1U168">idxS</span> ] = min(<span class="var type1" id="S29T24U171">tmpS</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="mxinfo " id="T22:U102"><span class="var type1" id="S32T22U174">totalTorque</span> = <span class="mxinfo " id="T22:U104">zeros(<span class="mxinfo " id="T1:U105"><span class="var type1" id="S16T1U178">M</span>+1</span>, <span class="mxinfo " id="T1:U107"><span class="var type1" id="S17T1U181">N</span>+1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S33T1U185">i</span> = <span class="mxinfo " id="T1:U110">1</span>:<span class="var type1" id="S16T1U189">M</span>+1</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S34T1U193">j</span> = <span class="mxinfo " id="T1:U113">1</span>:<span class="var type1" id="S17T1U197">N</span>+1</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line">        <span class="mxinfo " id="T1:U115"><span class="mxinfo " id="T1:U116"><span class="var type1" id="S32T22U202">totalTorque</span>(<span class="var type1" id="S33T1U203">i</span>,<span class="var type1" id="S34T1U204">j</span>)</span> = <span class="mxinfo " id="T1:U120"><span class="mxinfo " id="T1:U121"><span class="var type1" id="S27T22U207">tmpTorque</span>(<span class="var type1" id="S33T1U208">i</span>,<span class="var type1" id="S34T1U209">j</span>)</span> + <span class="mxinfo " id="T1:U125"><span class="var type1" id="S26T11U211">strategyMot</span>(<span class="var type1" id="S34T1U212">j</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line"><span class="comment">%T = P * 9.549 / n</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"><span class="mxinfo " id="T1:U128"><span class="var type1" id="S35T1U215">engineMaxPower</span> = <span class="mxinfo " id="T1:U130">57000</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="mxinfo " id="T1:U131"><span class="var type1" id="S36T1U219">motorMaxPower</span> = <span class="mxinfo " id="T1:U133">50000</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"><span class="mxinfo " id="T46:U134"><span class="var type1" id="S37T46U223">motorSpeed</span> = <span class="mxinfo " id="T46:U136">[<span class="mxinfo " id="T1:U137">0</span>, <span class="mxinfo " id="T1:U138">1200</span>, <span class="mxinfo " id="T1:U139">2000</span>, <span class="mxinfo " id="T1:U140">3000</span>, <span class="mxinfo " id="T1:U141">4000</span>, <span class="mxinfo " id="T1:U142">5000</span>, <span class="mxinfo " id="T1:U143">6000</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="mxinfo " id="T46:U144"><span class="var type1" id="S38T46U235">motorTorqueRef</span> = <span class="mxinfo " id="T46:U146">[<span class="mxinfo " id="T1:U147">400</span>, <span class="mxinfo " id="T1:U148">400</span>, <span class="mxinfo " id="T1:U149">280</span>, <span class="mxinfo " id="T1:U150">222</span>, <span class="mxinfo " id="T1:U151">179</span>, <span class="mxinfo " id="T1:U152">143</span>, <span class="mxinfo " id="T1:U153">119</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"><span class="mxinfo " id="T47:U154"><span class="var type1" id="S39T47U247">engineSpeed</span> = <span class="mxinfo " id="T47:U156">[<span class="mxinfo " id="T1:U157">0</span>, <span class="mxinfo " id="T1:U158">420</span>, <span class="mxinfo " id="T1:U159">900</span>, <span class="mxinfo " id="T1:U160">1380</span>, <span class="mxinfo " id="T1:U161">1860</span>, <span class="mxinfo " id="T1:U162">2340</span>, <span class="mxinfo " id="T1:U163">2820</span>, <span class="mxinfo " id="T1:U164">3300</span>, <span class="mxinfo " id="T1:U165">3780</span>, <span class="mxinfo " id="T1:U166">4260</span>, <span class="mxinfo " id="T1:U167">4740</span>, <span class="mxinfo " id="T1:U168">5220</span>, <span class="mxinfo " id="T1:U169">5700</span>, <span class="mxinfo " id="T1:U170">6000</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"><span class="mxinfo " id="T47:U171"><span class="var type1" id="S40T47U266">engineTorqueRef</span> = <span class="mxinfo " id="T47:U173">[<span class="mxinfo " id="T1:U174">109</span>, <span class="mxinfo " id="T1:U175">117</span>, <span class="mxinfo " id="T1:U176">125</span>, <span class="mxinfo " id="T1:U177">131</span>, <span class="mxinfo " id="T1:U178">134</span>, <span class="mxinfo " id="T1:U179">136</span>, <span class="mxinfo " id="T1:U180">136</span>, <span class="mxinfo " id="T1:U181">133</span>, <span class="mxinfo " id="T1:U182">129</span>, <span class="mxinfo " id="T1:U183">123</span>, <span class="mxinfo " id="T1:U184">114</span>, <span class="mxinfo " id="T1:U185">104</span>, <span class="mxinfo " id="T1:U186">91</span>, <span class="mxinfo " id="T1:U187">83</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"><span class="mxinfo " id="T1:U188"><span class="var type1" id="S41T1U285">wFuel</span> = <span class="mxinfo " id="T1:U190">60</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"><span class="mxinfo " id="T1:U191"><span class="var type1" id="S42T1U289">wPower</span> = <span class="mxinfo " id="T1:U193">0.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="mxinfo " id="T1:U194"><span class="var type1" id="S43T1U293">wDrDem</span> = <span class="mxinfo " id="T1:U196">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line"><span class="mxinfo " id="T1:U197"><span class="var type1" id="S44T1U297">wSOC</span> = <span class="mxinfo " id="T1:U199">21</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T1:U200"><span class="var type1" id="S45T1U301">wNOX</span> = <span class="mxinfo " id="T1:U202">28</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"><span class="mxinfo " id="T1:U203"><span class="var type1" id="S46T1U305">wCO</span> = <span class="mxinfo " id="T1:U205">56</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"><span class="mxinfo " id="T1:U206"><span class="var type1" id="S47T1U309">wHC</span> = <span class="mxinfo " id="T1:U208">45</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"><span class="comment">%fuelConsumedGPS = zeros(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"><span class="comment">%powerKW = zeros(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"><span class="comment">%HCEmissions = zeros(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"><span class="comment">%COEmissions = zeros(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line"><span class="comment">%NOXEmissions = zeros(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line">size(<span class="var type1" id="S4T1U314">requiredTorque</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S33T1U317">i</span> = <span class="mxinfo " id="T1:U211">1</span>:<span class="var type1" id="S16T1U321">M</span>+1</span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S34T1U325">j</span> = <span class="mxinfo " id="T1:U214">1</span>:<span class="var type1" id="S17T1U329">N</span>+1</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line">        <span class="mxinfo " id="T24:U216"><span class="var type1" id="S49T24U333">tmpT</span> = <span class="mxinfo " id="T24:U218">abs(<span class="mxinfo " id="T24:U219"><span class="mxinfo " id="T24:U220"><span class="mxinfo " id="T23:U221"><span class="var type1" id="S5T23U338">FuelConsTable</span></span>.torque</span> - <span class="mxinfo " id="T1:U223"><span class="var type1" id="S25T11U341">strategyEng</span>(<span class="var type1" id="S34T1U342">j</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">        <span class="mxinfo " id="T1:U226"><span class="var type1" id="S50T1U345">idxT</span> = <span class="mxinfo " id="T1:U228">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">        [<span class="mxinfo " id="T1:U229"><span class="mxinfo " id="T1:U230">~</span></span>, <span class="mxinfo " id="T1:U231"><span class="var type1" id="S50T1U351">idxT</span></span>] = min(<span class="var type1" id="S49T24U354">tmpT</span>);      </span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">        <span class="mxinfo " id="T1:U234"><span class="var type1" id="S51T1U357">fuelConsumedGPS</span> = <span class="mxinfo " id="T1:U236"><span class="mxinfo " id="T25:U237"><span class="mxinfo " id="T23:U238"><span class="var type1" id="S5T23U360">FuelConsTable</span></span>.lookupTableFuel</span>(<span class="var type1" id="S50T1U362">idxT</span>, <span class="mxinfo " id="T7:U241"><span class="var type1" id="S31T7U363">idxS</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line">        <span class="mxinfo " id="T1:U243"><span class="var type1" id="S52T1U366">powerKW</span> = <span class="mxinfo " id="T1:U245"><span class="mxinfo " id="T25:U246"><span class="mxinfo " id="T23:U247"><span class="var type1" id="S5T23U369">FuelConsTable</span></span>.lookupTablePower</span>(<span class="var type1" id="S50T1U371">idxT</span>, <span class="mxinfo " id="T7:U250"><span class="var type1" id="S31T7U372">idxS</span></span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line">        <span class="mxinfo " id="T1:U252"><span class="var type1" id="S53T1U375">HCEmissions</span> = <span class="mxinfo " id="T1:U254"><span class="mxinfo " id="T25:U255"><span class="mxinfo " id="T26:U256"><span class="var type1" id="S6T26U378">GasEmisTable</span></span>.lookupTableHC</span>(<span class="var type1" id="S50T1U380">idxT</span>, <span class="mxinfo " id="T7:U259"><span class="var type1" id="S31T7U381">idxS</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73">73</a></span><span class="line">        <span class="mxinfo " id="T1:U261"><span class="var type1" id="S54T1U384">COEmissions</span> = <span class="mxinfo " id="T1:U263"><span class="mxinfo " id="T25:U264"><span class="mxinfo " id="T26:U265"><span class="var type1" id="S6T26U387">GasEmisTable</span></span>.lookupTableCO</span>(<span class="var type1" id="S50T1U389">idxT</span>, <span class="mxinfo " id="T7:U268"><span class="var type1" id="S31T7U390">idxS</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74">74</a></span><span class="line">        <span class="mxinfo " id="T1:U270"><span class="var type1" id="S55T1U393">NOXEmissions</span> = <span class="mxinfo " id="T1:U272"><span class="mxinfo " id="T25:U273"><span class="mxinfo " id="T26:U274"><span class="var type1" id="S6T26U396">GasEmisTable</span></span>.lookupTableNOX</span>(<span class="var type1" id="S50T1U398">idxT</span>, <span class="mxinfo " id="T7:U277"><span class="var type1" id="S31T7U399">idxS</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75">75</a></span><span class="line">        <span class="mxinfo " id="T1:U279"><span class="mxinfo " id="T1:U280"><span class="var type1" id="S20T22U403">payoffEngine</span>(<span class="var type1" id="S33T1U404">i</span>,<span class="var type1" id="S34T1U405">j</span>)</span> = <span class="mxinfo " id="T1:U284"><span class="mxinfo " id="T1:U285"><span class="mxinfo " id="T1:U286"><span class="mxinfo " id="T1:U287"><span class="mxinfo " id="T1:U288"><span class="mxinfo " id="T1:U289"><span class="mxinfo " id="T1:U290"><span class="var type1" id="S41T1U412">wFuel</span></span>*<span class="var type1" id="S51T1U413">fuelConsumedGPS</span></span> + <span class="mxinfo " id="T1:U293"><span class="mxinfo " id="T1:U294"><span class="var type1" id="S43T1U415">wDrDem</span></span>*<span class="mxinfo " id="T1:U296">abs(<span class="mxinfo " id="T1:U297"><span class="var type1" id="S4T1U419">requiredTorque</span> - <span class="mxinfo " id="T1:U299"><span class="var type1" id="S32T22U421">totalTorque</span>(<span class="var type1" id="S33T1U422">i</span>,<span class="var type1" id="S34T1U423">j</span>)</span></span>)</span></span></span> + <span class="mxinfo " id="T1:U303"><span class="mxinfo " id="T1:U304"><span class="var type1" id="S44T1U425">wSOC</span></span>*<span class="mxinfo " id="T1:U306"><span class="var type1" id="S12T1U426">SOC_deviation</span></span></span></span> + <span class="mxinfo " id="T1:U308"><span class="mxinfo " id="T1:U309"><span class="var type1" id="S47T1U428">wHC</span></span>*<span class="var type1" id="S53T1U429">HCEmissions</span></span></span> + <span class="mxinfo " id="T1:U312"><span class="mxinfo " id="T1:U313"><span class="var type1" id="S46T1U431">wCO</span></span>*<span class="var type1" id="S54T1U432">COEmissions</span></span></span> + <span class="mxinfo " id="T1:U316"><span class="mxinfo " id="T1:U317"><span class="var type1" id="S45T1U434">wNOX</span></span>*<span class="var type1" id="S55T1U435">NOXEmissions</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76">76</a></span><span class="line">        <span class="mxinfo " id="T1:U320"><span class="mxinfo " id="T1:U321"><span class="var type1" id="S18T22U439">payoffMotor</span>(<span class="var type1" id="S33T1U440">i</span>,<span class="var type1" id="S34T1U441">j</span>)</span> = <span class="mxinfo " id="T1:U325"><span class="mxinfo " id="T1:U326"><span class="mxinfo " id="T1:U327"><span class="mxinfo " id="T1:U328"><span class="mxinfo " id="T1:U329"><span class="mxinfo " id="T1:U330"><span class="mxinfo " id="T1:U331"><span class="var type1" id="S42T1U448">wPower</span></span>*<span class="var type1" id="S52T1U449">powerKW</span></span> + <span class="mxinfo " id="T1:U334"><span class="mxinfo " id="T1:U335"><span class="var type1" id="S43T1U451">wDrDem</span></span>*<span class="mxinfo " id="T1:U337">abs(<span class="mxinfo " id="T1:U338"><span class="var type1" id="S4T1U455">requiredTorque</span> - <span class="mxinfo " id="T1:U340"><span class="var type1" id="S32T22U457">totalTorque</span>(<span class="var type1" id="S33T1U458">i</span>,<span class="var type1" id="S34T1U459">j</span>)</span></span>)</span></span></span> + <span class="mxinfo " id="T1:U344"><span class="mxinfo " id="T1:U345"><span class="var type1" id="S44T1U461">wSOC</span></span>*<span class="mxinfo " id="T1:U347"><span class="var type1" id="S12T1U462">SOC_deviation</span></span></span></span> + <span class="mxinfo " id="T1:U349"><span class="mxinfo " id="T1:U350"><span class="var type1" id="S47T1U464">wHC</span></span>*<span class="var type1" id="S53T1U465">HCEmissions</span></span></span> + <span class="mxinfo " id="T1:U353"><span class="mxinfo " id="T1:U354"><span class="var type1" id="S46T1U467">wCO</span></span>*<span class="var type1" id="S54T1U468">COEmissions</span></span></span> + <span class="mxinfo " id="T1:U357"><span class="mxinfo " id="T1:U358"><span class="var type1" id="S45T1U470">wNOX</span></span>*<span class="var type1" id="S55T1U471">NOXEmissions</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77">77</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78">78</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79">79</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80">80</a></span><span class="line"><span class="mxinfo " id="T28:U361"><span class="var type1" id="S56T28U474">payoffBoth</span> = <span class="mxinfo " id="T28:U363">reshape(<span class="mxinfo " id="T27:U364">[<span class="var type1" id="S18T22U479">payoffMotor</span>;<span class="var type1" id="S20T22U481">payoffEngine</span>]</span>,size(<span class="var type1" id="S18T22U484">payoffMotor</span>,1),[])</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81">81</a></span><span class="line"><span class="mxinfo " id="T28:U368"><span class="var type1" id="S58T28U490">payoff</span> = <span class="mxinfo " id="T28:U370">zeros(<span class="mxinfo " id="T1:U371"><span class="var type1" id="S16T1U494">M</span>+1</span>, <span class="mxinfo " id="T1:U373">(<span class="var type1" id="S17T1U499">N</span>+1)*2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82">82</a></span><span class="line"><span class="comment">%payoff = mat2cell(payoffBoth, ones(1,M+1), ones(1,M+1).*2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83">83</a></span><span class="line"><span class="mxinfo " id="T28:U375"><span class="var type1" id="S58T28U504">payoff</span> = <span class="var type1" id="S56T28U505">payoffBoth</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84">84</a></span><span class="line"><span class="mxinfo " id="T45:U378"><span class="var type1" id="S59T45U508">pareto</span> = <span class="mxinfo " id="T45:U380">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85">85</a></span><span class="line"><span class="mxinfo " id="T45:U381"><span class="var type1" id="S60T45U513">paretoString</span> = <span class="mxinfo " id="T45:U383">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86">86</a></span><span class="line"><span class="mxinfo " id="T48:U384"><span class="var type1" id="S59T48U518">pareto</span> = <span class="mxinfo " id="T48:U386"><span class="fcn" id="F268N11:B520">paretoSet</span>(<span class="var type1" id="S58T28U521">payoff</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87">87</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88">88</a></span><span class="line"><span class="var type1" id="S59T48U523">pareto</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89">89</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90">90</a></span><span class="line"><span class="mxinfo " id="T1:U389"><span class="var type1" id="S3T1U526">motorTorque</span> = <span class="mxinfo " id="T1:U391"><span class="var type1" id="S26T11U528">strategyMot</span>(<span class="mxinfo " id="T1:U393"><span class="var type1" id="S59T48U530">pareto</span>(<span class="mxinfo " id="T1:U395">1</span>)</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91">91</a></span><span class="line"><span class="mxinfo " id="T1:U396"><span class="var type1" id="S2T1U534">engineTorque</span> = <span class="mxinfo " id="T1:U398"><span class="var type1" id="S25T11U536">strategyEng</span>(<span class="mxinfo " id="T1:U400"><span class="var type1" id="S59T48U538">pareto</span>(<span class="mxinfo " id="T1:U402">2</span>)</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92">92</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
