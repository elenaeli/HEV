<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">engineTorque</span>,<span class="var type1" id="S3T1U4">motorTorque</span>] = solveGame(<span class="var type1" id="S4T1U7">requiredTorque</span>, <span class="var type1" id="S5T1U8">previousReqTorque</span>,<span class="var type1" id="S6T1U9">previousEngTorque</span>, <span class="var type1" id="S7T1U10">previousMotTorque</span>, <span class="var type1" id="S8T1U11">SOC</span>, <span class="var type1" id="S9T1U12">fuelConsumed</span>, <span class="mxinfo " id="T23:U9"><span class="var type1" id="S10T23U13">FuelConsTable</span></span>, <span class="mxinfo " id="T39:U11"><span class="var type1" id="S11T39U14">GasEmisTable</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line">    coder.extrinsic(<span class="string">'int2str'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line">    coder.extrinsic(<span class="string">'ismembertol'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line">    coder.extrinsic(<span class="string">'knnsearch'</span>); </span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line">    coder.extrinsic(<span class="string">'legend'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line">    coder.extrinsic(<span class="string">'roundn'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line">    <span class="mxinfo " id="T1:U13"><span class="var type1" id="S13T1U47">requiredTorqueR</span> = <span class="mxinfo " id="T1:U15">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line">    <span class="mxinfo " id="T1:U16"><span class="var type1" id="S13T1U51">requiredTorqueR</span> = <span class="mxinfo " id="T42:U18"><span class="extrinsicFcn" id="F271N12:B53">roundn</span>(<span class="var type1" id="S4T1U54">requiredTorque</span>,<span class="mxinfo " id="T1:U20">0</span>)</span></span>;     </span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T2:U21"><span class="var type1" id="S5T1U59">previousReqTorque</span> == <span class="var type1" id="S13T1U60">requiredTorqueR</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line">        <span class="mxinfo " id="T1:U24"><span class="var type1" id="S2T1U63">engineTorque</span> = <span class="var type1" id="S6T1U64">previousEngTorque</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line">        <span class="mxinfo " id="T1:U27"><span class="var type1" id="S3T1U67">motorTorque</span> = <span class="var type1" id="S7T1U68">previousMotTorque</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T2:U30"><span class="var type1" id="S13T1U74">requiredTorqueR</span> &gt; <span class="mxinfo " id="T1:U32">0</span></span> &amp;&amp; <span class="mxinfo " id="T2:U33"><span class="var type1" id="S13T1U77">requiredTorqueR</span> &lt; <span class="mxinfo " id="T1:U35">70</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line">           <span class="mxinfo " id="T1:U36"><span class="var type1" id="S13T1U81">requiredTorqueR</span> = <span class="mxinfo " id="T1:U38">70</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line">           <span class="mxinfo " id="T1:U39"><span class="var type1" id="S2T1U85">engineTorque</span> = <span class="mxinfo " id="T1:U41">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line">           <span class="mxinfo " id="T1:U42"><span class="var type1" id="S3T1U89">motorTorque</span> = <span class="mxinfo " id="T1:U44">70</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line">        <span class="keyword">elseif</span> <span class="mxinfo " id="T2:U45"><span class="var type1" id="S13T1U93">requiredTorqueR</span> == <span class="mxinfo " id="T1:U47">0</span></span>          </span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line">            <span class="mxinfo " id="T1:U48"><span class="var type1" id="S2T1U97">engineTorque</span> = <span class="mxinfo " id="T1:U50">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line">            <span class="mxinfo " id="T1:U51"><span class="var type1" id="S3T1U101">motorTorque</span> = <span class="mxinfo " id="T1:U53">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line">            close <span class="string">all</span>   </span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line">            <span class="mxinfo " id="T10:U54"><span class="var type1" id="S16T10U109">motorSpeedCurve</span> = <span class="mxinfo " id="T10:U56">[0, 1200, 2000, 3000, 4000, 5000, 6000]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line">            <span class="mxinfo " id="T10:U57"><span class="var type1" id="S17T10U121">motorTorqueCurve</span> = <span class="mxinfo " id="T10:U59">[400 399 225 150 100 80 70]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line">            <span class="mxinfo " id="T1:U60"><span class="var type1" id="S18T1U133">SOC_deviation</span> = <span class="mxinfo " id="T1:U62">abs(<span class="mxinfo " id="T1:U63"><span class="mxinfo " id="T1:U64">70</span> - <span class="var type1" id="S8T1U138">SOC</span></span>)</span></span>;       </span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line">            <span class="mxinfo " id="T1:U66"><span class="var type1" id="S20T1U141">maxEngineTorque</span> = <span class="mxinfo " id="T1:U68">136</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line">            <span class="mxinfo " id="T1:U69"><span class="var type1" id="S21T1U145">maxMotorTorque</span> = <span class="mxinfo " id="T1:U71">400</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line">            <span class="mxinfo " id="T1:U72"><span class="var type1" id="S22T1U149">minMotorTorque</span> = <span class="mxinfo " id="T1:U74">-400</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line">            <span class="mxinfo " id="T1:U75"><span class="var type1" id="S23T1U154">minMotorTorqueRef</span> = <span class="mxinfo " id="T1:U77">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line">            <span class="mxinfo " id="T1:U78"><span class="var type1" id="S24T1U158">minEngineTorqueRef</span> = <span class="mxinfo " id="T1:U80">82.73</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line">            <span class="mxinfo " id="T1:U81"><span class="var type1" id="S25T1U162">minEngineTorque</span> = <span class="mxinfo " id="T1:U83">-136</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line">            <span class="mxinfo " id="T1:U84"><span class="var type1" id="S26T1U167">m</span> = <span class="mxinfo " id="T1:U86">7</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line">            <span class="mxinfo " id="T1:U87"><span class="var type1" id="S27T1U171">e</span> = <span class="mxinfo " id="T1:U89">7</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line">            <span class="mxinfo " id="T22:U90"><span class="var type1" id="S28T22U175">payoffMotor</span> = <span class="mxinfo " id="T22:U92">zeros(<span class="mxinfo " id="T1:U93"><span class="var type1" id="S26T1U178">m</span></span>,<span class="mxinfo " id="T1:U95"><span class="var type1" id="S27T1U179">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line">            <span class="mxinfo " id="T22:U97"><span class="var type1" id="S30T22U182">payoffEngine</span> = <span class="mxinfo " id="T22:U99">zeros(<span class="mxinfo " id="T1:U100"><span class="var type1" id="S26T1U185">m</span></span>,<span class="mxinfo " id="T1:U102"><span class="var type1" id="S27T1U186">e</span></span>)</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo " id="T2:U104"><span class="var type1" id="S4T1U190">requiredTorque</span> &lt; <span class="mxinfo " id="T1:U106">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line">                <span class="mxinfo " id="T1:U107"><span class="var type1" id="S31T1U194">maxMotorTorqueStrategy</span> = <span class="mxinfo " id="T1:U109">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line">                <span class="mxinfo " id="T1:U110"><span class="var type1" id="S32T1U198">maxEngineTorqueStrategy</span> = <span class="mxinfo " id="T1:U112">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line">                <span class="mxinfo " id="T1:U113"><span class="var type1" id="S33T1U202">minEngineTorqueStrategy</span> = <span class="mxinfo " id="T1:U115">max(<span class="mxinfo " id="T1:U116"><span class="var type1" id="S25T1U205">minEngineTorque</span></span>, <span class="var type1" id="S4T1U206">requiredTorque</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line">                <span class="mxinfo " id="T1:U119"><span class="var type1" id="S35T1U209">minMotorTorqueStrategy</span> = <span class="mxinfo " id="T1:U121">max(<span class="mxinfo " id="T1:U122"><span class="var type1" id="S22T1U212">minMotorTorque</span></span>, <span class="var type1" id="S4T1U213">requiredTorque</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line">                <span class="mxinfo " id="T10:U125"><span class="var type1" id="S36T10U216">strategyMot</span> = <span class="mxinfo " id="T10:U127">linspace(<span class="var type1" id="S35T1U219">minMotorTorqueStrategy</span>, <span class="mxinfo " id="T1:U129"><span class="var type1" id="S31T1U220">maxMotorTorqueStrategy</span></span>, <span class="var type1" id="S26T1U221">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line">                <span class="mxinfo " id="T10:U132"><span class="var type1" id="S38T10U224">strategyEng</span> = <span class="mxinfo " id="T10:U134">linspace(<span class="var type1" id="S33T1U227">minEngineTorqueStrategy</span>, <span class="mxinfo " id="T1:U136"><span class="var type1" id="S32T1U228">maxEngineTorqueStrategy</span></span>,<span class="var type1" id="S27T1U229">e</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line">                <span class="mxinfo " id="T1:U139"><span class="var type1" id="S33T1U233">minEngineTorqueStrategy</span> = <span class="mxinfo " id="T1:U141">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line">                <span class="mxinfo " id="T1:U142"><span class="var type1" id="S35T1U237">minMotorTorqueStrategy</span> = <span class="mxinfo " id="T1:U144">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line">                <span class="mxinfo " id="T1:U145"><span class="var type1" id="S32T1U241">maxEngineTorqueStrategy</span> = <span class="mxinfo " id="T1:U147">min(<span class="mxinfo " id="T13:U148">[<span class="var type1" id="S4T1U246">requiredTorque</span> <span class="mxinfo " id="T1:U150"><span class="var type1" id="S20T1U247">maxEngineTorque</span></span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line">                <span class="mxinfo " id="T1:U152"><span class="var type1" id="S31T1U250">maxMotorTorqueStrategy</span> = <span class="mxinfo " id="T1:U154">min(<span class="mxinfo " id="T13:U155">[<span class="var type1" id="S4T1U255">requiredTorque</span> <span class="mxinfo " id="T1:U157"><span class="var type1" id="S21T1U256">maxMotorTorque</span></span>]</span>)</span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T2:U159"><span class="var type1" id="S23T1U260">minMotorTorqueRef</span> &gt; <span class="var type1" id="S31T1U261">maxMotorTorqueStrategy</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line">                    <span class="var type1" id="S36T10U264">strategyMot</span> = zeros(1,<span class="var type1" id="S26T1U268">m</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line">                    <span class="mxinfo " id="T10:U164"><span class="var type1" id="S36T10U272">strategyMot</span> = <span class="mxinfo " id="T10:U166">linspace(<span class="mxinfo " id="T1:U167"><span class="var type1" id="S23T1U275">minMotorTorqueRef</span></span>, <span class="var type1" id="S31T1U276">maxMotorTorqueStrategy</span>, <span class="var type1" id="S26T1U277">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo " id="T2:U171"><span class="mxinfo " id="T1:U172"><span class="var type1" id="S24T1U281">minEngineTorqueRef</span></span> &gt; <span class="var type1" id="S32T1U282">maxEngineTorqueStrategy</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line">                    <span class="mxinfo " id="T10:U175"><span class="var type1" id="S38T10U285">strategyEng</span> = <span class="mxinfo " id="T10:U177">zeros(<span class="mxinfo " id="T1:U178">1</span>,<span class="mxinfo " id="T1:U179"><span class="var type1" id="S27T1U289">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line">                    <span class="mxinfo " id="T10:U181"><span class="var type1" id="S38T10U293">strategyEng</span> = <span class="mxinfo " id="T10:U183">linspace(<span class="mxinfo " id="T1:U184"><span class="var type1" id="S24T1U296">minEngineTorqueRef</span></span>, <span class="var type1" id="S32T1U297">maxEngineTorqueStrategy</span>,<span class="var type1" id="S27T1U298">e</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line">            <span class="keyword">end</span>          </span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line">            <span class="mxinfo " id="T22:U188"><span class="var type1" id="S40T22U301">tmpTorque</span> = <span class="mxinfo " id="T22:U190">repmat(<span class="mxinfo " id="T16:U191"><span class="var type1" id="S38T10U305">strategyEng</span>'</span>,1,<span class="var type1" id="S26T1U307">m</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">            <span class="mxinfo " id="T22:U194"><span class="var type1" id="S42T22U310">totalTorque</span> = <span class="mxinfo " id="T22:U196">zeros(<span class="mxinfo " id="T1:U197"><span class="var type1" id="S26T1U313">m</span></span>, <span class="mxinfo " id="T1:U199"><span class="var type1" id="S27T1U314">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S43T1U317">i</span> = <span class="mxinfo " id="T1:U202">1</span>:<span class="var type1" id="S26T1U320">m</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line">                <span class="keyword">for</span> <span class="var type1" id="S44T1U323">j</span> = <span class="mxinfo " id="T1:U205">1</span>:<span class="var type1" id="S27T1U326">e</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line">                    <span class="mxinfo " id="T1:U207"><span class="mxinfo " id="T1:U208"><span class="var type1" id="S42T22U330">totalTorque</span>(<span class="var type1" id="S43T1U331">i</span>,<span class="var type1" id="S44T1U332">j</span>)</span> = <span class="mxinfo " id="T1:U212"><span class="mxinfo " id="T1:U213"><span class="var type1" id="S40T22U335">tmpTorque</span>(<span class="var type1" id="S43T1U336">i</span>,<span class="var type1" id="S44T1U337">j</span>)</span> + <span class="mxinfo " id="T1:U217"><span class="var type1" id="S36T10U339">strategyMot</span>(<span class="var type1" id="S44T1U340">j</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line">            <span class="keyword">end</span>      </span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line">            <span class="comment">% weights     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line">            <span class="mxinfo " id="T1:U220"><span class="var type1" id="S45T1U343">wFuel</span> = <span class="mxinfo " id="T1:U222">3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line">            <span class="mxinfo " id="T1:U223"><span class="var type1" id="S46T1U347">wPower</span> = <span class="mxinfo " id="T1:U225">0.5</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line">            <span class="mxinfo " id="T1:U226"><span class="var type1" id="S47T1U351">wTank</span> = <span class="mxinfo " id="T1:U228">0.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line">            <span class="mxinfo " id="T1:U229"><span class="var type1" id="S48T1U355">wDrDem</span> = <span class="mxinfo " id="T1:U231">0.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line">            <span class="mxinfo " id="T1:U232"><span class="var type1" id="S49T1U359">wSOC</span> = <span class="mxinfo " id="T1:U234">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line">            <span class="mxinfo " id="T1:U235"><span class="var type1" id="S50T1U363">wNOX</span> = <span class="mxinfo " id="T1:U237">65</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line">            <span class="mxinfo " id="T1:U238"><span class="var type1" id="S51T1U367">wCO</span> = <span class="mxinfo " id="T1:U240">25</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line">            <span class="mxinfo " id="T1:U241"><span class="var type1" id="S52T1U371">wHC</span> = <span class="mxinfo " id="T1:U243">45</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line">            <span class="mxinfo " id="T10:U244"><span class="var type1" id="S53T10U375">motorSpeedRef</span> = <span class="mxinfo " id="T10:U246">zeros(<span class="mxinfo " id="T1:U247">1</span>,<span class="mxinfo " id="T1:U248"><span class="var type1" id="S27T1U379">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line">            <span class="mxinfo " id="T10:U250"><span class="var type1" id="S54T10U382">powerMotorKW</span> = <span class="mxinfo " id="T10:U252">zeros(<span class="mxinfo " id="T1:U253">1</span>,<span class="mxinfo " id="T1:U254"><span class="var type1" id="S27T1U386">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line">            <span class="mxinfo " id="T22:U256"><span class="var type1" id="S55T22U389">torqueDeviation</span> = <span class="mxinfo " id="T22:U258">zeros(<span class="mxinfo " id="T1:U259"><span class="var type1" id="S26T1U392">m</span></span>,<span class="mxinfo " id="T1:U261"><span class="var type1" id="S27T1U393">e</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line">            <span class="mxinfo " id="T16:U263"><span class="var type1" id="S56T16U396">fuel</span> = <span class="mxinfo " id="T16:U265">zeros(<span class="mxinfo " id="T1:U266"><span class="var type1" id="S27T1U399">e</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line">            <span class="mxinfo " id="T16:U268"><span class="var type1" id="S57T16U403">nox</span> = <span class="mxinfo " id="T16:U270">zeros(<span class="mxinfo " id="T1:U271"><span class="var type1" id="S27T1U406">e</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line">            <span class="mxinfo " id="T16:U273"><span class="var type1" id="S58T16U410">power</span> = <span class="mxinfo " id="T16:U275">zeros(<span class="mxinfo " id="T1:U276"><span class="var type1" id="S27T1U413">e</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S43T1U417">i</span> = <span class="mxinfo " id="T1:U279">1</span>:<span class="var type1" id="S26T1U420">m</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line">                <span class="keyword">for</span> <span class="var type1" id="S44T1U423">j</span> = <span class="mxinfo " id="T1:U282">1</span>:<span class="var type1" id="S27T1U426">e</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line">                    <span class="mxinfo " id="T24:U284"><span class="var type1" id="S59T24U429">tmpT</span> = <span class="mxinfo " id="T24:U286">abs(<span class="mxinfo " id="T24:U287"><span class="mxinfo " id="T24:U288"><span class="mxinfo " id="T23:U289"><span class="var type1" id="S10T23U434">FuelConsTable</span></span>.torque</span> - <span class="mxinfo " id="T1:U291"><span class="var type1" id="S38T10U437">strategyEng</span>(<span class="var type1" id="S44T1U438">j</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line">                    <span class="mxinfo " id="T1:U294"><span class="var type1" id="S60T1U441">idxT</span> = <span class="mxinfo " id="T1:U296">0</span></span>;                    </span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line">                    <span class="comment">% Power(W) = Torque (N.m) x Speed (RPM) / 9.5488</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line">                    <span class="comment">% divide by 1000 for kW               </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line">                    <span class="mxinfo " id="T1:U297"><span class="mxinfo " id="T1:U298"><span class="var type1" id="S53T10U446">motorSpeedRef</span>(<span class="var type1" id="S44T1U447">j</span>)</span> = <span class="mxinfo " id="T1:U301">interp1(<span class="var type1" id="S17T10U450">motorTorqueCurve</span>, <span class="var type1" id="S16T10U451">motorSpeedCurve</span>, <span class="mxinfo " id="T1:U304"><span class="var type1" id="S36T10U453">strategyMot</span>(<span class="var type1" id="S44T1U454">j</span>)</span>,<span class="string">'linear'</span>,<span class="string">'extrap'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line">                    <span class="mxinfo " id="T1:U307"><span class="mxinfo " id="T1:U308"><span class="var type1" id="S54T10U460">powerMotorKW</span>(<span class="var type1" id="S44T1U461">j</span>)</span> = <span class="mxinfo " id="T1:U311"><span class="mxinfo " id="T1:U312"><span class="mxinfo " id="T1:U313"><span class="mxinfo " id="T1:U314"><span class="var type1" id="S36T10U466">strategyMot</span>(<span class="var type1" id="S44T1U467">j</span>)</span> * <span class="mxinfo " id="T1:U317"><span class="var type1" id="S53T10U469">motorSpeedRef</span>(<span class="var type1" id="S44T1U470">j</span>)</span></span> / <span class="mxinfo " id="T1:U320">9.5488</span></span> / <span class="mxinfo " id="T1:U321">1000</span></span></span>;       </span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line">                    <span class="mxinfo " id="T24:U322"><span class="var type1" id="S62T24U475">tmpS</span> = <span class="mxinfo " id="T24:U324">abs(<span class="mxinfo " id="T24:U325"><span class="mxinfo " id="T24:U326"><span class="mxinfo " id="T23:U327"><span class="var type1" id="S10T23U480">FuelConsTable</span></span>.speed</span> - <span class="mxinfo " id="T1:U329"><span class="var type1" id="S53T10U483">motorSpeedRef</span>(<span class="var type1" id="S44T1U484">j</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line">                    <span class="mxinfo " id="T1:U332"><span class="var type1" id="S63T1U487">idxS</span> = <span class="mxinfo " id="T1:U334">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line">                    [<span class="mxinfo " id="T1:U335"><span class="mxinfo " id="T1:U336">~</span></span>, <span class="mxinfo " id="T1:U337"><span class="var type1" id="S63T1U493">idxS</span></span>] = min(<span class="var type1" id="S62T24U496">tmpS</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line">                    [<span class="mxinfo " id="T1:U340"><span class="mxinfo " id="T1:U341">~</span></span>, <span class="mxinfo " id="T1:U342"><span class="var type1" id="S60T1U501">idxT</span></span>] = min(<span class="var type1" id="S59T24U504">tmpT</span>);    </span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">                    <span class="mxinfo " id="T1:U345"><span class="var type1" id="S64T1U507">fuelConsumedGPS</span> = <span class="mxinfo " id="T1:U347"><span class="mxinfo " id="T25:U348"><span class="mxinfo " id="T23:U349"><span class="var type1" id="S10T23U510">FuelConsTable</span></span>.lookupTableFuel</span>(<span class="var type1" id="S60T1U512">idxT</span>, <span class="var type1" id="S63T1U513">idxS</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">                    <span class="mxinfo " id="T1:U353"><span class="var type1" id="S65T1U516">HCEmissions</span> = <span class="mxinfo " id="T1:U355"><span class="mxinfo " id="T25:U356"><span class="mxinfo " id="T39:U357"><span class="var type1" id="S11T39U519">GasEmisTable</span></span>.lookupTableHC</span>(<span class="var type1" id="S60T1U521">idxT</span>, <span class="var type1" id="S63T1U522">idxS</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">                    <span class="mxinfo " id="T1:U361"><span class="var type1" id="S66T1U525">COEmissions</span> = <span class="mxinfo " id="T1:U363"><span class="mxinfo " id="T25:U364"><span class="mxinfo " id="T39:U365"><span class="var type1" id="S11T39U528">GasEmisTable</span></span>.lookupTableCO</span>(<span class="var type1" id="S60T1U530">idxT</span>, <span class="var type1" id="S63T1U531">idxS</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">                    <span class="mxinfo " id="T1:U369"><span class="var type1" id="S67T1U534">NOXEmissions</span> = <span class="mxinfo " id="T1:U371"><span class="mxinfo " id="T25:U372"><span class="mxinfo " id="T39:U373"><span class="var type1" id="S11T39U537">GasEmisTable</span></span>.lookupTableNOX</span>(<span class="var type1" id="S60T1U539">idxT</span>, <span class="var type1" id="S63T1U540">idxS</span>)</span></span>;   </span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">                    <span class="mxinfo " id="T1:U377"><span class="mxinfo " id="T1:U378"><span class="var type1" id="S55T22U544">torqueDeviation</span>(<span class="var type1" id="S43T1U545">i</span>,<span class="var type1" id="S44T1U546">j</span>)</span> = <span class="mxinfo " id="T1:U382"><span class="var type1" id="S13T1U548">requiredTorqueR</span> - <span class="mxinfo " id="T1:U384"><span class="var type1" id="S42T22U550">totalTorque</span>(<span class="var type1" id="S43T1U551">i</span>,<span class="var type1" id="S44T1U552">j</span>)</span></span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line">                    <span class="mxinfo " id="T1:U388"><span class="mxinfo " id="T1:U389"><span class="var type1" id="S30T22U556">payoffEngine</span>(<span class="var type1" id="S43T1U557">i</span>,<span class="var type1" id="S44T1U558">j</span>)</span> = <span class="mxinfo " id="T1:U393"><span class="mxinfo " id="T1:U394"><span class="mxinfo " id="T1:U395"><span class="mxinfo " id="T1:U396"><span class="mxinfo " id="T1:U397"><span class="mxinfo " id="T1:U398"><span class="mxinfo " id="T1:U399"><span class="var type1" id="S45T1U565">wFuel</span></span>*<span class="var type1" id="S64T1U566">fuelConsumedGPS</span></span> + <span class="mxinfo " id="T1:U402"><span class="mxinfo " id="T1:U403"><span class="var type1" id="S48T1U568">wDrDem</span></span>*<span class="mxinfo " id="T1:U405">abs(<span class="mxinfo " id="T1:U406"><span class="var type1" id="S55T22U572">torqueDeviation</span>(<span class="var type1" id="S43T1U573">i</span>,<span class="var type1" id="S44T1U574">j</span>)</span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line"><span class="mxinfo " id="T1:U388"><span class="mxinfo " id="T1:U393"><span class="mxinfo " id="T1:U394"><span class="mxinfo " id="T1:U395"><span class="mxinfo " id="T1:U396">                        <span class="mxinfo " id="T1:U410"><span class="mxinfo " id="T1:U411"><span class="var type1" id="S52T1U576">wHC</span></span>*<span class="var type1" id="S65T1U577">HCEmissions</span></span></span> + <span class="mxinfo " id="T1:U414"><span class="mxinfo " id="T1:U415"><span class="var type1" id="S51T1U579">wCO</span></span>*<span class="var type1" id="S66T1U580">COEmissions</span></span></span> + <span class="mxinfo " id="T1:U418"><span class="mxinfo " id="T1:U419"><span class="var type1" id="S50T1U582">wNOX</span></span>*<span class="var type1" id="S67T1U583">NOXEmissions</span></span></span> + <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line"><span class="mxinfo " id="T1:U388"><span class="mxinfo " id="T1:U393">                        <span class="mxinfo " id="T1:U422"><span class="mxinfo " id="T1:U423"><span class="var type1" id="S47T1U585">wTank</span></span>*<span class="var type1" id="S9T1U586">fuelConsumed</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line">                    <span class="mxinfo " id="T1:U426"><span class="mxinfo " id="T1:U427"><span class="var type1" id="S28T22U590">payoffMotor</span>(<span class="var type1" id="S43T1U591">i</span>,<span class="var type1" id="S44T1U592">j</span>)</span> = <span class="mxinfo " id="T1:U431"><span class="mxinfo " id="T1:U432"><span class="mxinfo " id="T1:U433"><span class="mxinfo " id="T1:U434"><span class="var type1" id="S48T1U596">wDrDem</span></span>*<span class="mxinfo " id="T1:U436">abs(<span class="mxinfo " id="T1:U437"><span class="var type1" id="S55T22U600">torqueDeviation</span>(<span class="var type1" id="S43T1U601">i</span>,<span class="var type1" id="S44T1U602">j</span>)</span>)</span></span> + <span class="mxinfo " id="T1:U441"><span class="mxinfo " id="T1:U442"><span class="var type1" id="S46T1U604">wPower</span></span>*<span class="mxinfo " id="T1:U444"><span class="var type1" id="S54T10U606">powerMotorKW</span>(<span class="var type1" id="S44T1U607">j</span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line"><span class="mxinfo " id="T1:U426"><span class="mxinfo " id="T1:U431">                        <span class="mxinfo " id="T1:U447"><span class="mxinfo " id="T1:U448"><span class="var type1" id="S49T1U609">wSOC</span></span>*<span class="var type1" id="S18T1U610">SOC_deviation</span></span></span></span>;              </span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line">                    <span class="mxinfo " id="T1:U451"><span class="mxinfo " id="T1:U452"><span class="var type1" id="S56T16U614">fuel</span>(<span class="var type1" id="S44T1U615">j</span>,<span class="mxinfo " id="T1:U455">1</span>)</span> = <span class="var type1" id="S64T1U617">fuelConsumedGPS</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line">                    <span class="mxinfo " id="T1:U457"><span class="mxinfo " id="T1:U458"><span class="var type1" id="S57T16U621">nox</span>(<span class="var type1" id="S44T1U622">j</span>,<span class="mxinfo " id="T1:U461">1</span>)</span> = <span class="var type1" id="S67T1U624">NOXEmissions</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line">                    <span class="mxinfo " id="T1:U463"><span class="mxinfo " id="T1:U464"><span class="var type1" id="S58T16U628">power</span>(<span class="var type1" id="S44T1U629">j</span>,<span class="mxinfo " id="T1:U467">1</span>)</span> = <span class="mxinfo " id="T1:U468"><span class="var type1" id="S54T10U632">powerMotorKW</span>(<span class="var type1" id="S44T1U633">j</span>)</span></span>;                                </span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">            <span class="mxinfo " id="T54:U471"><span class="var type1" id="S68T54U636">paretoStrategies</span> = <span class="mxinfo " id="T54:U473">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">            <span class="mxinfo " id="T54:U474"><span class="var type1" id="S69T54U641">paretoIndex</span> = <span class="mxinfo " id="T54:U476">[]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">            <span class="var type1" id="S30T22U645">payoffEngine</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">            <span class="var type1" id="S28T22U647">payoffMotor</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">            [<span class="mxinfo " id="T55:U479"><span class="var type1" id="S68T55U651">paretoStrategies</span></span>, <span class="mxinfo " id="T55:U481"><span class="var type1" id="S69T55U652">paretoIndex</span></span>, <span class="mxinfo " id="T1:U483"><span class="mxinfo " id="T40:U484">~</span></span>, <span class="mxinfo " id="T1:U485"><span class="mxinfo " id="T1:U486">~</span></span>] = <span class="fcn" id="F239N10:B656">paretoset</span>(<span class="var type1" id="S30T22U657">payoffEngine</span>, <span class="var type1" id="S28T22U658">payoffMotor</span>);       </span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">            <span class="mxinfo " id="T44:U489"><span class="var type1" id="S71T44U661">payoffE</span> = <span class="mxinfo " id="T44:U491">reshape(<span class="var type1" id="S30T22U664">payoffEngine</span>,(<span class="var type1" id="S26T1U667">m</span>)*(<span class="var type1" id="S27T1U669">e</span>),1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line">            <span class="mxinfo " id="T44:U495"><span class="var type1" id="S73T44U673">payoffM</span> = <span class="mxinfo " id="T44:U497">reshape(<span class="var type1" id="S28T22U676">payoffMotor</span>,(<span class="var type1" id="S26T1U679">m</span>)*(<span class="var type1" id="S27T1U681">e</span>),1)</span></span>;        </span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line">            <span class="mxinfo " id="T53:U501"><span class="var type1" id="S74T53U685">payoffBoth</span> = <span class="mxinfo " id="T53:U503">horzcat(<span class="var type1" id="S71T44U688">payoffE</span>, <span class="var type1" id="S73T44U689">payoffM</span>)</span></span>;   </span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line">            <span class="mxinfo " id="T56:U506"><span class="var type1" id="S76T56U692">engineTorquePareto</span> = <span class="mxinfo " id="T56:U508"><span class="var type1" id="S38T10U694">strategyEng</span>(<span class="mxinfo " id="T62:U510"><span class="var type1" id="S69T55U696">paretoIndex</span>(<span class="mxinfo " id="T63:U512">:</span>,<span class="mxinfo " id="T1:U513">1</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">            <span class="mxinfo " id="T56:U514"><span class="var type1" id="S77T56U701">motorTorquePareto</span> = <span class="mxinfo " id="T56:U516"><span class="var type1" id="S36T10U703">strategyMot</span>(<span class="mxinfo " id="T62:U518"><span class="var type1" id="S69T55U705">paretoIndex</span>(<span class="mxinfo " id="T63:U520">:</span>,<span class="mxinfo " id="T1:U521">2</span>)</span>)</span></span>;        </span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line">            <span class="mxinfo " id="T42:U522"><span class="var type1" id="S78T42U710">stringRequiredTorque</span> = <span class="mxinfo " id="T42:U524"><span class="extrinsicFcn" id="F280N8:B712">int2str</span>(<span class="var type1" id="S13T1U713">requiredTorqueR</span>)</span></span>;   </span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">            [ <span class="mxinfo " id="T57:U526"><span class="var type1" id="S80T57U717">bestPayoffEngPareto</span></span>, <span class="mxinfo " id="T57:U528"><span class="var type1" id="S81T57U718">bestPayoffMotPareto</span></span> ] = <span class="fcn" id="F269N3:B720">bestpareto</span>( <span class="var type1" id="S68T55U721">paretoStrategies</span>, <span class="var type1" id="S69T55U722">paretoIndex</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">            <span class="var type1" id="S55T22U723">torqueDeviation</span>, <span class="var type1" id="S56T16U724">fuel</span>, <span class="var type1" id="S57T16U725">nox</span>, <span class="var type1" id="S58T16U726">power</span> );</span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">    <span class="comment">%         numStratBoth = m+e;  </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">    <span class="comment">%        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">    <span class="comment">%         [nashEqPl1, nashEqPl2] = LemkeHowson(-payoffEngine, -payoffMotor, ceil(1/2*numStratBoth));                     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">    <span class="comment">%         payoffEngNash = payoffEngine(nashEqPl1==1, nashEqPl2==1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">    <span class="comment">%         payoffMotNash = payoffMotor(nashEqPl1==1, nashEqPl2==1);       </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">    <span class="comment">%         %[~, indM] = min(payoffEngNash);        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">    <span class="comment">%               </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">    <span class="comment">%         conflictPoint = sub2ind([m e], find(nashEqPl1==1), find(nashEqPl2==1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line">    <span class="comment">%         [~, indNP] = nashsolution(payoffBoth, conflictPoint);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line">    <span class="comment">%         payoffEngNashSol = payoffBoth(indNP,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line">    <span class="comment">%         payoffMotNashSol = payoffBoth(indNP,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line">    <span class="comment">%         paretoStrInd = horzcat(paretoStrategies, paretoIndex);        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,148" id="srcline148">148</a></span><span class="line">    <span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,149" id="srcline149">149</a></span><span class="line">    <span class="comment">%         [ks, linePareto] = kalaismorodinskysolution(payoffBoth, conflictPoint, paretoStrategies, paretoStrInd);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,150" id="srcline150">150</a></span><span class="line">    <span class="comment">%         percentReqTorq = linspace(0, requiredTorqueR, 10);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,151" id="srcline151">151</a></span><span class="line">    <span class="comment">%         probKsMixed = zeros(1,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,152" id="srcline152">152</a></span><span class="line">    <span class="comment">%         ksMixed = zeros(1,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,153" id="srcline153">153</a></span><span class="line">    <span class="comment">%         if ~isempty(linePareto)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,154" id="srcline154">154</a></span><span class="line">    <span class="comment">%             if linePareto(2,1) - linePareto(1,1) ~=0 &amp;&amp; linePareto(1,2) - linePareto(2,2) ~= 0</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,155" id="srcline155">155</a></span><span class="line">    <span class="comment">%                 probKsMixed(1) = (ks(1,1) - linePareto(1,1)) / (linePareto(2,1) - linePareto(1,1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,156" id="srcline156">156</a></span><span class="line">    <span class="comment">%                 probKsMixed(2) = (ks(1,2) - min(linePareto(:,2))) / (linePareto(1,2) - linePareto(2,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,157" id="srcline157">157</a></span><span class="line">    <span class="comment">%             elseif linePareto(2,1) - linePareto(1,1) == 0</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,158" id="srcline158">158</a></span><span class="line">    <span class="comment">%                 probKsMixed(2) = (ks(1,2) - min(linePareto(:,2))) / (linePareto(1,2) - linePareto(2,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,159" id="srcline159">159</a></span><span class="line">    <span class="comment">%                 probKsMixed(1) = 1 - probKsMixed(2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,160" id="srcline160">160</a></span><span class="line">    <span class="comment">%             elseif linePareto(1,2) - linePareto(2,2) == 0</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,161" id="srcline161">161</a></span><span class="line">    <span class="comment">%                  probKsMixed(1) = (ks(1,1) - linePareto(1,1)) / (linePareto(2,1) - linePareto(1,1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,162" id="srcline162">162</a></span><span class="line">    <span class="comment">%                  probKsMixed(2) = 1 - probKsMixed(1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,163" id="srcline163">163</a></span><span class="line">    <span class="comment">%             end             </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,164" id="srcline164">164</a></span><span class="line">    <span class="comment">%             ksMixed(1) = linePareto(1,1) + probKsMixed(1)*(linePareto(2,1) - linePareto(1,1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,165" id="srcline165">165</a></span><span class="line">    <span class="comment">%             ksMixed(2) = min(linePareto(:,2)) + probKsMixed(2)*abs(linePareto(1,2) - linePareto(2,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,166" id="srcline166">166</a></span><span class="line">    <span class="comment">%                         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,167" id="srcline167">167</a></span><span class="line">    <span class="comment">%             mixedEngineTorque = min(strategyEng(linePareto(1,3)),strategyEng(linePareto(2,3))) + <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,168" id="srcline168">168</a></span><span class="line">    <span class="comment">%                 probKsMixed(1)*abs(strategyEng(linePareto(1,3))-strategyEng(linePareto(2,3)));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,169" id="srcline169">169</a></span><span class="line">    <span class="comment">%             mixedMotorTorque = min(strategyMot(linePareto(1,4)),strategyMot(linePareto(2,4))) + <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,170" id="srcline170">170</a></span><span class="line">    <span class="comment">%                 probKsMixed(1)*abs(strategyMot(linePareto(1,4))-strategyMot(linePareto(2,4)));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,171" id="srcline171">171</a></span><span class="line">    <span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,172" id="srcline172">172</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,173" id="srcline173">173</a></span><span class="line">    <span class="comment">%         %payoffCoalCoef = ones(m,e);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,174" id="srcline174">174</a></span><span class="line">    <span class="comment">%         %payoffCoalCoef(m:m-1:end-1) = 0.5;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,175" id="srcline175">175</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,176" id="srcline176">176</a></span><span class="line">    <span class="comment">%         [ payoffWholeCoal, coeffCoal, payoffEngineCoal, payoffMotorCoal, payoffWholeCoalBefore ] = <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,177" id="srcline177">177</a></span><span class="line">    <span class="comment">%             coalitionpayoffs(payoffMotor, payoffEngine, torqueDeviation, percentReqTorq);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,178" id="srcline178">178</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,179" id="srcline179">179</a></span><span class="line">    <span class="comment">%         indCoal = (coeffCoal == 0.99 | coeffCoal == 0.991);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,180" id="srcline180">180</a></span><span class="line">    <span class="comment">%         indCoalition = +indCoal;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,181" id="srcline181">181</a></span><span class="line">    <span class="comment">%         indCoalition(indCoal == true) = 0.98;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,182" id="srcline182">182</a></span><span class="line">    <span class="comment">%         indCoalition(indCoal == false) = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,183" id="srcline183">183</a></span><span class="line">    <span class="comment">%         %payoffWholeCoal1 = payoffWholeCoal .* indCoalition;      </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,184" id="srcline184">184</a></span><span class="line">    <span class="comment">%     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,185" id="srcline185">185</a></span><span class="line">    <span class="comment">%         payoffMotCoalVec = reshape(payoffMotorCoal,(m)*(e),1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,186" id="srcline186">186</a></span><span class="line">    <span class="comment">%         payoffEngCoalVec = reshape(payoffEngineCoal,(m)*(e),1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,187" id="srcline187">187</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,188" id="srcline188">188</a></span><span class="line">    <span class="comment">%         % get all undominated strategies (pareto optimality)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,189" id="srcline189">189</a></span><span class="line">    <span class="comment">%         [undomImp, undomImpInd] = checkimputation(payoffBoth, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,190" id="srcline190">190</a></span><span class="line">    <span class="comment">%             paretoStrategies, payoffMotCoalVec, payoffEngCoalVec, payoffWholeCoal);        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,191" id="srcline191">191</a></span><span class="line">    <span class="comment">%         imputM = zeros(1,size(undomImpInd,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,192" id="srcline192">192</a></span><span class="line">    <span class="comment">%         imputE = zeros(1,size(undomImpInd,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,193" id="srcline193">193</a></span><span class="line">    <span class="comment">%         for i = 1 : size(undomImpInd,2)             </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,194" id="srcline194">194</a></span><span class="line">    <span class="comment">%             if all(undomImp(i,1) &lt;= payoffEngine(m,:))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,195" id="srcline195">195</a></span><span class="line">    <span class="comment">%                 imputM(1,i) = undomImpInd(i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,196" id="srcline196">196</a></span><span class="line">    <span class="comment">%             end                </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,197" id="srcline197">197</a></span><span class="line">    <span class="comment">%             if all(undomImp(i,2) &lt;= payoffMotor(:,e))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,198" id="srcline198">198</a></span><span class="line">    <span class="comment">%                 imputE(1,i) = undomImpInd(i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,199" id="srcline199">199</a></span><span class="line">    <span class="comment">%             end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,200" id="srcline200">200</a></span><span class="line">    <span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,201" id="srcline201">201</a></span><span class="line">    <span class="comment">%         coder.varsize('imput');  </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,202" id="srcline202">202</a></span><span class="line">    <span class="comment">%         imput = undomImpInd;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,203" id="srcline203">203</a></span><span class="line">    <span class="comment">%         imput(imput==0) = [];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,204" id="srcline204">204</a></span><span class="line">    <span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,205" id="srcline205">205</a></span><span class="line">    <span class="comment">%         payoffImput = zeros(size(imput,1),3);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,206" id="srcline206">206</a></span><span class="line">    <span class="comment">%         for i = 1 : size(imput,1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,207" id="srcline207">207</a></span><span class="line">    <span class="comment">%             payoffImput(i,1) = payoffBoth(imput(i),1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,208" id="srcline208">208</a></span><span class="line">    <span class="comment">%             payoffImput(i,2) = payoffBoth(imput(i),2);       </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,209" id="srcline209">209</a></span><span class="line">    <span class="comment">%             [r, c] = ind2sub(size(payoffWholeCoal), imput(i));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,210" id="srcline210">210</a></span><span class="line">    <span class="comment">%             payoffImput(i,3) = payoffWholeCoal(r,c);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,211" id="srcline211">211</a></span><span class="line">    <span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,212" id="srcline212">212</a></span><span class="line">    <span class="comment">%                </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,213" id="srcline213">213</a></span><span class="line">    <span class="comment">%         coreSol = core(payoffImput);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,214" id="srcline214">214</a></span><span class="line">    <span class="comment">%         indCore = find(coreSol);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,215" id="srcline215">215</a></span><span class="line">    <span class="comment">%         Xengine = zeros(m,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,216" id="srcline216">216</a></span><span class="line">    <span class="comment">%         Xmotor = zeros(m,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,217" id="srcline217">217</a></span><span class="line">    <span class="comment">%         [Xengine, X2, A1, b1, v1] = mixedstrategies(payoffEngine,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,218" id="srcline218">218</a></span><span class="line">    <span class="comment">%         [Xmotor, X1, A2, b2, v2] = mixedstrategies(payoffMotor,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,219" id="srcline219">219</a></span><span class="line">    <span class="comment">%         coder.varsize('payoffStrEng');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,220" id="srcline220">220</a></span><span class="line">    <span class="comment">%         coder.varsize('payoffStrMot');        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,221" id="srcline221">221</a></span><span class="line">    <span class="comment">%        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,222" id="srcline222">222</a></span><span class="line">    <span class="comment">%         if  ~isempty(A1) &amp;&amp; ~isempty(A2) &amp;&amp; ~isempty(b1) &amp;&amp; ~isempty(b2)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,223" id="srcline223">223</a></span><span class="line">    <span class="comment">%             mixedStrEng = find(abs(Xengine-0)&gt;0.001);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,224" id="srcline224">224</a></span><span class="line">    <span class="comment">%             mixedStrMot = find(abs(Xmotor-0)&gt;0.001);         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,225" id="srcline225">225</a></span><span class="line">    <span class="comment">%             payoffProbMixedStrEng = zeros(size(mixedStrEng,1),2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,226" id="srcline226">226</a></span><span class="line">    <span class="comment">%             payoffProbMixedStrMot = zeros(size(mixedStrMot,1),2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,227" id="srcline227">227</a></span><span class="line">    <span class="comment">%             payoffStrEng = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,228" id="srcline228">228</a></span><span class="line">    <span class="comment">%             for i = 1 : size(mixedStrEng,1)        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,229" id="srcline229">229</a></span><span class="line">    <span class="comment">%                 payoffProbMixedStrEng(i,1) = payoffEngine(mixedStrEng(i));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,230" id="srcline230">230</a></span><span class="line">    <span class="comment">%                 payoffProbMixedStrEng(i,2) = Xengine(mixedStrEng(i));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,231" id="srcline231">231</a></span><span class="line">    <span class="comment">%                 payoffStrEng = payoffStrEng + payoffEngine(mixedStrEng(i))*Xengine(mixedStrEng(i));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,232" id="srcline232">232</a></span><span class="line">    <span class="comment">%             end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,233" id="srcline233">233</a></span><span class="line">    <span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,234" id="srcline234">234</a></span><span class="line">    <span class="comment">%             payoffStrMot = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,235" id="srcline235">235</a></span><span class="line">    <span class="comment">%             for j = 1 : size(mixedStrMot,1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,236" id="srcline236">236</a></span><span class="line">    <span class="comment">%                 payoffProbMixedStrMot(j,1) = payoffMotor(mixedStrMot(j));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,237" id="srcline237">237</a></span><span class="line">    <span class="comment">%                 payoffProbMixedStrMot(j,2) = Xmotor(mixedStrMot(j));    </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,238" id="srcline238">238</a></span><span class="line">    <span class="comment">%                 payoffStrMot = payoffStrMot + payoffMotor(mixedStrMot(j))*Xmotor(mixedStrMot(j));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,239" id="srcline239">239</a></span><span class="line">    <span class="comment">%             end         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,240" id="srcline240">240</a></span><span class="line">    <span class="comment">%         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,241" id="srcline241">241</a></span><span class="line">    <span class="comment">%             pureStrEng = find(Xengine);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,242" id="srcline242">242</a></span><span class="line">    <span class="comment">%             pureStrMot = find(X2);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,243" id="srcline243">243</a></span><span class="line">    <span class="comment">%             payoffStrEng = payoffEngine(pureStrEng, pureStrMot);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,244" id="srcline244">244</a></span><span class="line">    <span class="comment">%             payoffStrMot = payoffMotor(pureStrEng, pureStrMot);           </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,245" id="srcline245">245</a></span><span class="line">    <span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,246" id="srcline246">246</a></span><span class="line">    <span class="comment">%         m1 = min(payoffBoth(:,1));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,247" id="srcline247">247</a></span><span class="line">    <span class="comment">%         m2 = min(payoffBoth(:,2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,248" id="srcline248">248</a></span><span class="line">    <span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,249" id="srcline249">249</a></span><span class="line">    <span class="comment">%         v12 = min(min(payoffWholeCoalBefore));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,250" id="srcline250">250</a></span><span class="line">    <span class="comment">%         [ shEngine, shMotor ] = shapleyvalue(v12, v1, v2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,251" id="srcline251">251</a></span><span class="line">    <span class="comment">%         if ~ismembertol([shEngine, shMotor],payoffBoth,0.001,'ByRows',true)           </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,252" id="srcline252">252</a></span><span class="line">    <span class="comment">%             IDX = zeros(1,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,253" id="srcline253">253</a></span><span class="line">    <span class="comment">%             IDX = knnsearch(payoffBoth,[shEngine shMotor],'K', 2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,254" id="srcline254">254</a></span><span class="line">    <span class="comment">%             [idr1, idc1] = ind2sub(size(payoffEngine), IDX(1));        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,255" id="srcline255">255</a></span><span class="line">    <span class="comment">%             [idr2, idc2] = ind2sub(size(payoffEngine), IDX(2));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,256" id="srcline256">256</a></span><span class="line">    <span class="comment">%             nearestSh1 = [idr1 idc1];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,257" id="srcline257">257</a></span><span class="line">    <span class="comment">%             nearestSh2 = [idr2 idc2];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,258" id="srcline258">258</a></span><span class="line">    <span class="comment">%             payoffNearestSh1 = [payoffEngine(idr1,idc1) payoffMotor(idr1,idc1)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,259" id="srcline259">259</a></span><span class="line">    <span class="comment">%             payoffNearestSh2 = [payoffEngine(idr2,idc2) payoffMotor(idr2,idc2)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,260" id="srcline260">260</a></span><span class="line">    <span class="comment">%             probNearSh1 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,261" id="srcline261">261</a></span><span class="line">    <span class="comment">%             probNearSh2 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,262" id="srcline262">262</a></span><span class="line">    <span class="comment">%             if payoffNearestSh1(1) ~= payoffNearestSh2(1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,263" id="srcline263">263</a></span><span class="line">    <span class="comment">%                 j = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,264" id="srcline264">264</a></span><span class="line">    <span class="comment">%                 shapley = shEngine;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,265" id="srcline265">265</a></span><span class="line">    <span class="comment">%             else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,266" id="srcline266">266</a></span><span class="line">    <span class="comment">%                 j = 2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,267" id="srcline267">267</a></span><span class="line">    <span class="comment">%                 shapley = shMotor;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,268" id="srcline268">268</a></span><span class="line">    <span class="comment">%             end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,269" id="srcline269">269</a></span><span class="line">    <span class="comment">%             if payoffNearestSh2(j) &lt; shapley &amp;&amp;  <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,270" id="srcline270">270</a></span><span class="line">    <span class="comment">%                 shapley &lt; payoffNearestSh1(j)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,271" id="srcline271">271</a></span><span class="line">    <span class="comment">%                 probNearSh2 = (shapley - payoffNearestSh2(j)) / <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,272" id="srcline272">272</a></span><span class="line">    <span class="comment">%                     (payoffNearestSh1(j) - payoffNearestSh2(j));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,273" id="srcline273">273</a></span><span class="line">    <span class="comment">%                 probNearSh1 = 1 - probNearSh2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,274" id="srcline274">274</a></span><span class="line">    <span class="comment">%             elseif payoffNearestSh1(j) &lt; shapley &amp;&amp; <span class="keyword">...</span><span class="comment">                    </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,275" id="srcline275">275</a></span><span class="line">    <span class="comment">%                 shapley &lt; payoffNearestSh2(j)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,276" id="srcline276">276</a></span><span class="line">    <span class="comment">%                 probNearSh1 = (shapley - payoffNearestSh1(j)) / <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,277" id="srcline277">277</a></span><span class="line">    <span class="comment">%                     (payoffNearestSh2(j) - payoffNearestSh1(j));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,278" id="srcline278">278</a></span><span class="line">    <span class="comment">%                 probNearSh2 = 1 - probNearSh1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,279" id="srcline279">279</a></span><span class="line">    <span class="comment">%             elseif shapley &lt; payoffNearestSh1(j) &amp;&amp;  <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,280" id="srcline280">280</a></span><span class="line">    <span class="comment">%                 shapley &lt; payoffNearestSh2(j)            </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,281" id="srcline281">281</a></span><span class="line">    <span class="comment">%                 if payoffNearestSh1(j) &lt; payoffNearestSh2(j)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,282" id="srcline282">282</a></span><span class="line">    <span class="comment">%                     probNearSh1 = shapley / payoffNearestSh1(j);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,283" id="srcline283">283</a></span><span class="line">    <span class="comment">%                     probNearSh2 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,284" id="srcline284">284</a></span><span class="line">    <span class="comment">%                 elseif payoffNearestSh2(j) &lt; payoffNearestSh1(j)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,285" id="srcline285">285</a></span><span class="line">    <span class="comment">%                     probNearSh2 = shapley / payoffNearestSh2(j);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,286" id="srcline286">286</a></span><span class="line">    <span class="comment">%                     probNearSh1 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,287" id="srcline287">287</a></span><span class="line">    <span class="comment">%                 end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,288" id="srcline288">288</a></span><span class="line">    <span class="comment">%             end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,289" id="srcline289">289</a></span><span class="line">    <span class="comment">%             probNearSh1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,290" id="srcline290">290</a></span><span class="line">    <span class="comment">%             probNearSh2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,291" id="srcline291">291</a></span><span class="line">    <span class="comment">%             shapleyEngineTorque = probNearSh1*strategyEng(idr1) + probNearSh2*strategyEng(idr2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,292" id="srcline292">292</a></span><span class="line">    <span class="comment">%             shapleyMotorTorque = probNearSh1*strategyMot(idc1) + probNearSh2*strategyMot(idc2);          </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,293" id="srcline293">293</a></span><span class="line">    <span class="comment">%         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,294" id="srcline294">294</a></span><span class="line">    <span class="comment">%              [~, ind] = ismembertol([shEngine, shMotor],payoffBoth,0.001,'ByRows',true); </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,295" id="srcline295">295</a></span><span class="line">    <span class="comment">%              idr1 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,296" id="srcline296">296</a></span><span class="line">    <span class="comment">%              idc1 = 0;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,297" id="srcline297">297</a></span><span class="line">    <span class="comment">%              [idr1, idc1] = ind2sub(size(payoffEngine), ind);             </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,298" id="srcline298">298</a></span><span class="line">    <span class="comment">%              shapleyEngineTorque = strategyEng(idr1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,299" id="srcline299">299</a></span><span class="line">    <span class="comment">%              shapleyMotorTorque = strategyMot(idc1);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,300" id="srcline300">300</a></span><span class="line">    <span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,301" id="srcline301">301</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,302" id="srcline302">302</a></span><span class="line">            <span class="comment">%lightpurple = [163 154 255] ./ 255;        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,303" id="srcline303">303</a></span><span class="line">            <span class="comment">%p10 = plot(payoffStrEng, payoffStrMot, 'o',<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,304" id="srcline304">304</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', lightpurple, 'MarkerEdgeColor', lightpurple, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,305" id="srcline305">305</a></span><span class="line">            <span class="comment">%    'MarkerSize', 13);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,306" id="srcline306">306</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,307" id="srcline307">307</a></span><span class="line">            <span class="comment">%limegreen = [194 242 1] ./ 255;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,308" id="srcline308">308</a></span><span class="line">            <span class="comment">%p3 = plot(bestPayoffEngPareto, bestPayoffMotPareto, 'og', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,309" id="srcline309">309</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', 'g', 'MarkerSize', 12);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,310" id="srcline310">310</a></span><span class="line">            <span class="comment">%p5 = plot(payoffEngNashNPG, payoffMotNashNPG, 'o', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,311" id="srcline311">311</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor','m', 'MarkerEdgeColor', 'm',<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,312" id="srcline312">312</a></span><span class="line">            <span class="comment">%    'MarkerSize', 13);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,313" id="srcline313">313</a></span><span class="line">            <span class="comment">%p4 = plot(payoffEngNash, payoffMotNash, 'oy', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,314" id="srcline314">314</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', 'y', 'MarkerSize', 10);     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,315" id="srcline315">315</a></span><span class="line">            <span class="comment">%p41 = plot(bestPayoffEngNashLH(1), bestPayoffMotNashLH(1), 'oc', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,316" id="srcline316">316</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', 'c', 'MarkerSize', 9);      </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,317" id="srcline317">317</a></span><span class="line">            <span class="comment">%p42 = plot(bestPayoffEngNashLH(2), bestPayoffMotNashLH(2), 'o', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,318" id="srcline318">318</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', 'r', 'MarkerEdgeColor','r','MarkerSize', 7);     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,319" id="srcline319">319</a></span><span class="line">            <span class="comment">%p43 = plot(bestPayoffEngNashLH(3), bestPayoffMotNashLH(3), 'o', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,320" id="srcline320">320</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor', limegreen,'MarkerEdgeColor', limegreen, 'MarkerSize', 5);         </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,321" id="srcline321">321</a></span><span class="line">            <span class="comment">%p6 = plot(payoffEngNashSol, payoffMotNashSol,'or', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,322" id="srcline322">322</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor',[1,0.6,0] , 'MarkerEdgeColor', [1,0.6,0] ,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,323" id="srcline323">323</a></span><span class="line">            <span class="comment">%    'MarkerSize', 9);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,324" id="srcline324">324</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,325" id="srcline325">325</a></span><span class="line">            <span class="comment">%purple = [118 31 133] ./ 255;        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,326" id="srcline326">326</a></span><span class="line">            <span class="comment">%p7 = plot(ks(1,1), ks(1,2), 'o', 'MarkerFaceColor', purple, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,327" id="srcline327">327</a></span><span class="line">            <span class="comment">%    'MarkerEdgeColor', purple, 'MarkerSize', 9);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,328" id="srcline328">328</a></span><span class="line">            <span class="comment">%pink = [254 164 191] ./ 255;       </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,329" id="srcline329">329</a></span><span class="line">            <span class="comment">%p8 = plot(payoffBoth(imput(indCore),1), payoffBoth(imput(indCore),2), 'o', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,330" id="srcline330">330</a></span><span class="line">            <span class="comment">%    'MarkerFaceColor',pink, 'MarkerEdgeColor',pink,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,331" id="srcline331">331</a></span><span class="line">            <span class="comment">%    'MarkerSize', 8);      </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,332" id="srcline332">332</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,333" id="srcline333">333</a></span><span class="line">            <span class="comment">%p9 = plot(shEngine, shMotor, 'o', 'MarkerFaceColor', limegreen, <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,334" id="srcline334">334</a></span><span class="line">            <span class="comment">%    'MarkerEdgeColor', limegreen, 'MarkerSize', 7);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,335" id="srcline335">335</a></span><span class="line">            <span class="comment">%p2 = p9;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,336" id="srcline336">336</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,337" id="srcline337">337</a></span><span class="line">            <span class="comment">%for r = 1 : size(paretoIndex,1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,338" id="srcline338">338</a></span><span class="line">            <span class="comment">%    linearIndex = sub2ind([m e], paretoIndex(r,2), paretoIndex(r,1));           </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,339" id="srcline339">339</a></span><span class="line">            <span class="comment">%    p2 = plot(x(linearIndex), y(linearIndex), 'o', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,340" id="srcline340">340</a></span><span class="line">            <span class="comment">%        'MarkerEdgeColor', [0,0.5,0], 'MarkerFaceColor',[0,0.5,0],<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,341" id="srcline341">341</a></span><span class="line">            <span class="comment">%        'MarkerSize',6);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,342" id="srcline342">342</a></span><span class="line">            <span class="comment">%end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,343" id="srcline343">343</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,344" id="srcline344">344</a></span><span class="line">            <span class="comment">%darkred = [185 16 20] ./ 255;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,345" id="srcline345">345</a></span><span class="line">            <span class="comment">%pi = plot(m1, m2, 'o', 'MarkerSize', 4, 'MarkerFaceColor',darkred ,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,346" id="srcline346">346</a></span><span class="line">            <span class="comment">%'MarkerEdgeColor', darkred);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,347" id="srcline347">347</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,348" id="srcline348">348</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,349" id="srcline349">349</a></span><span class="line">            <span class="comment">%legend([p1 p2 p3 p4 p7 p8 p9 p10], 'Payoff', <span class="keyword">...</span><span class="comment">         </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,350" id="srcline350">350</a></span><span class="line">            <span class="comment">%'Pareto optimal payoff', <span class="keyword">...</span><span class="comment">  </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,351" id="srcline351">351</a></span><span class="line">            <span class="comment">%'Best Pareto payoff', <span class="keyword">...</span><span class="comment"> </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,352" id="srcline352">352</a></span><span class="line">            <span class="comment">%'Nash Equilibrium Lemke-Howson (conflict point)', <span class="keyword">...</span><span class="comment"> </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,353" id="srcline353">353</a></span><span class="line">            <span class="comment">%'Kalai-Smorodinsky Solution', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,354" id="srcline354">354</a></span><span class="line">            <span class="comment">%'Core', <span class="keyword">...</span><span class="comment">        </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,355" id="srcline355">355</a></span><span class="line">            <span class="comment">%'Shapley value', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,356" id="srcline356">356</a></span><span class="line">            <span class="comment">%'Mixed Strategies', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,357" id="srcline357">357</a></span><span class="line">            <span class="comment">%'Location', 'northwest');       </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,358" id="srcline358">358</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,359" id="srcline359">359</a></span><span class="line">            <span class="comment">%'Ideal point', <span class="keyword">...</span><span class="comment">       </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,360" id="srcline360">360</a></span><span class="line">            <span class="comment">%'Nash Equilibrium Lemke-Howson k0=1', <span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,361" id="srcline361">361</a></span><span class="line">            <span class="comment">%'Nash Equilibrium Lemke-Howson k0=8', <span class="keyword">...</span><span class="comment">     </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,362" id="srcline362">362</a></span><span class="line">            <span class="comment">%'Nash Equilibrium Lemke-Howson k0=15' , <span class="keyword">...</span><span class="comment"> </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,363" id="srcline363">363</a></span><span class="line">            <span class="comment">%'Nash Equilibrium Lemke-Howson k0=23' , <span class="keyword">...</span><span class="comment">          </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,364" id="srcline364">364</a></span><span class="line">            <span class="comment">%'Nash Equilibrium NPG', <span class="keyword">...</span><span class="comment">       </span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,365" id="srcline365">365</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,366" id="srcline366">366</a></span><span class="line">            <span class="comment">%xlabel('Payoff Engine');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,367" id="srcline367">367</a></span><span class="line">            <span class="comment">%ylabel('Payoff Motor');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,368" id="srcline368">368</a></span><span class="line">            <span class="comment">%hold off</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,369" id="srcline369">369</a></span><span class="line">       </span></span>
<span class="srcline"><span class="lineno"><a href="1,370" id="srcline370">370</a></span><span class="line">            [ <span class="mxinfo " id="T1:U536"><span class="var type1" id="S2T1U730">engineTorque</span></span>, <span class="mxinfo " id="T1:U538"><span class="var type1" id="S3T1U731">motorTorque</span></span> ] = <span class="fcn" id="F270N11:B733">payofftotorque</span>(<span class="var type1" id="S80T57U734">bestPayoffEngPareto</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,371" id="srcline371">371</a></span><span class="line">                <span class="var type1" id="S81T57U735">bestPayoffMotPareto</span>, <span class="var type1" id="S74T53U736">payoffBoth</span>, <span class="var type1" id="S38T10U737">strategyEng</span>, <span class="var type1" id="S36T10U738">strategyMot</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,372" id="srcline372">372</a></span><span class="line">            <span class="mxinfo " id="T1:U545"><span class="var type1" id="S5T1U741">previousReqTorque</span> = <span class="var type1" id="S13T1U742">requiredTorqueR</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,373" id="srcline373">373</a></span><span class="line">            <span class="mxinfo " id="T1:U548"><span class="var type1" id="S6T1U745">previousEngTorque</span> = <span class="var type1" id="S2T1U746">engineTorque</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,374" id="srcline374">374</a></span><span class="line">            <span class="mxinfo " id="T1:U551"><span class="var type1" id="S7T1U749">previousMotTorque</span> = <span class="var type1" id="S3T1U750">motorTorque</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,375" id="srcline375">375</a></span><span class="line">       </span></span>
<span class="srcline"><span class="lineno"><a href="1,376" id="srcline376">376</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,377" id="srcline377">377</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,378" id="srcline378">378</a></span><span class="line">    <span class="keyword">end</span></span></span>
</pre>
